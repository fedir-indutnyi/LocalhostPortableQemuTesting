<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Deprecated features &mdash; QEMU  documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/theme_overrides.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/qemu_32x32.png"/>
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
        <script src="../_static/custom.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Removed features" href="removed-features.html" />
    <link rel="prev" title="Emulation" href="emulation.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #802400" >

          
          
          <a href="../index.html" class="icon icon-home">
            QEMU
              <img src="../_static/qemu_128x128.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                9.0.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">About QEMU</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="build-platforms.html">Supported build platforms</a></li>
<li class="toctree-l2"><a class="reference internal" href="emulation.html">Emulation</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Deprecated features</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#system-emulator-command-line-arguments">System emulator command line arguments</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#short-form-boolean-options-since-6-0">Short-form boolean options (since 6.0)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#delay-option-for-socket-character-devices-since-6-0"><code class="docutils literal notranslate"><span class="pre">delay</span></code> option for socket character devices (since 6.0)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#plugin-argument-passing-through-arg-string-since-6-1">Plugin argument passing through <code class="docutils literal notranslate"><span class="pre">arg=&lt;string&gt;</span></code> (since 6.1)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#smp-unsupported-parameter-1-smp-configurations-since-9-0"><code class="docutils literal notranslate"><span class="pre">-smp</span></code> (Unsupported “parameter=1” SMP configurations) (since 9.0)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#user-mode-emulator-command-line-arguments">User-mode emulator command line arguments</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#p-since-9-0"><code class="docutils literal notranslate"><span class="pre">-p</span></code> (since 9.0)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#qemu-machine-protocol-qmp-commands">QEMU Machine Protocol (QMP) commands</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#blockdev-open-tray-blockdev-close-tray-argument-device-since-2-8"><code class="docutils literal notranslate"><span class="pre">blockdev-open-tray</span></code>, <code class="docutils literal notranslate"><span class="pre">blockdev-close-tray</span></code> argument <code class="docutils literal notranslate"><span class="pre">device</span></code> (since 2.8)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#eject-argument-device-since-2-8"><code class="docutils literal notranslate"><span class="pre">eject</span></code> argument <code class="docutils literal notranslate"><span class="pre">device</span></code> (since 2.8)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#blockdev-change-medium-argument-device-since-2-8"><code class="docutils literal notranslate"><span class="pre">blockdev-change-medium</span></code> argument <code class="docutils literal notranslate"><span class="pre">device</span></code> (since 2.8)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#block-set-io-throttle-argument-device-since-2-8"><code class="docutils literal notranslate"><span class="pre">block_set_io_throttle</span></code> argument <code class="docutils literal notranslate"><span class="pre">device</span></code> (since 2.8)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#blockdev-add-empty-string-argument-backing-since-2-10"><code class="docutils literal notranslate"><span class="pre">blockdev-add</span></code> empty string argument <code class="docutils literal notranslate"><span class="pre">backing</span></code> (since 2.10)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#block-commit-arguments-base-and-top-since-3-1"><code class="docutils literal notranslate"><span class="pre">block-commit</span></code> arguments <code class="docutils literal notranslate"><span class="pre">base</span></code> and <code class="docutils literal notranslate"><span class="pre">top</span></code> (since 3.1)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#nbd-server-add-and-nbd-server-remove-since-5-2"><code class="docutils literal notranslate"><span class="pre">nbd-server-add</span></code> and <code class="docutils literal notranslate"><span class="pre">nbd-server-remove</span></code> (since 5.2)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#query-qmp-schema-return-value-member-values-since-6-2"><code class="docutils literal notranslate"><span class="pre">query-qmp-schema</span></code> return value member <code class="docutils literal notranslate"><span class="pre">values</span></code> (since 6.2)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#drive-backup-since-6-2"><code class="docutils literal notranslate"><span class="pre">drive-backup</span></code> (since 6.2)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#incorrectly-typed-device-add-arguments-since-6-2">Incorrectly typed <code class="docutils literal notranslate"><span class="pre">device_add</span></code> arguments (since 6.2)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#qemu-machine-protocol-qmp-events">QEMU Machine Protocol (QMP) events</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#mem-unplug-error-since-6-2"><code class="docutils literal notranslate"><span class="pre">MEM_UNPLUG_ERROR</span></code> (since 6.2)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#vcpu-trace-events-since-8-1"><code class="docutils literal notranslate"><span class="pre">vcpu</span></code> trace events (since 8.1)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#host-architectures">Host Architectures</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#be-mips-since-7-2">BE MIPS (since 7.2)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#system-emulation-on-32-bit-x86-hosts-since-8-0">System emulation on 32-bit x86 hosts (since 8.0)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#system-emulator-cpus">System emulator CPUs</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#nios-ii-cpu-since-8-2">Nios II CPU (since 8.2)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#power5-and-power7-cpu-names-since-9-0"><code class="docutils literal notranslate"><span class="pre">power5+</span></code> and <code class="docutils literal notranslate"><span class="pre">power7+</span></code> CPU names (since 9.0)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#cris-cpu-architecture-since-9-0">CRIS CPU architecture (since 9.0)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#system-emulator-machines">System emulator machines</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#arm-virt-machine-dtb-kaslr-seed-property-since-7-1">Arm <code class="docutils literal notranslate"><span class="pre">virt</span></code> machine <code class="docutils literal notranslate"><span class="pre">dtb-kaslr-seed</span></code> property (since 7.1)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#pc-i440fx-2-0-up-to-pc-i440fx-2-3-since-8-2"><code class="docutils literal notranslate"><span class="pre">pc-i440fx-2.0</span></code> up to <code class="docutils literal notranslate"><span class="pre">pc-i440fx-2.3</span></code> (since 8.2)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#nios-ii-10m50-ghrd-and-nios2-generic-nommu-machines-since-8-2">Nios II <code class="docutils literal notranslate"><span class="pre">10m50-ghrd</span></code> and <code class="docutils literal notranslate"><span class="pre">nios2-generic-nommu</span></code> machines (since 8.2)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#shix-since-9-0"><code class="docutils literal notranslate"><span class="pre">shix</span></code> (since 9.0)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#pseries-2-1-up-to-pseries-2-12-since-9-0"><code class="docutils literal notranslate"><span class="pre">pseries-2.1</span></code> up to <code class="docutils literal notranslate"><span class="pre">pseries-2.12</span></code> (since 9.0)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#arm-machines-akita-borzoi-cheetah-connex-mainstone-n800-n810-spitz-terrier-tosa-verdex-z2-since-9-0">Arm machines <code class="docutils literal notranslate"><span class="pre">akita</span></code>, <code class="docutils literal notranslate"><span class="pre">borzoi</span></code>, <code class="docutils literal notranslate"><span class="pre">cheetah</span></code>, <code class="docutils literal notranslate"><span class="pre">connex</span></code>, <code class="docutils literal notranslate"><span class="pre">mainstone</span></code>, <code class="docutils literal notranslate"><span class="pre">n800</span></code>, <code class="docutils literal notranslate"><span class="pre">n810</span></code>, <code class="docutils literal notranslate"><span class="pre">spitz</span></code>, <code class="docutils literal notranslate"><span class="pre">terrier</span></code>, <code class="docutils literal notranslate"><span class="pre">tosa</span></code>, <code class="docutils literal notranslate"><span class="pre">verdex</span></code>, <code class="docutils literal notranslate"><span class="pre">z2</span></code> (since 9.0)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#backend-options">Backend options</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#using-non-persistent-backing-file-with-pmem-on-since-6-1">Using non-persistent backing file with pmem=on (since 6.1)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#device-options">Device options</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#emulated-device-options">Emulated device options</a></li>
<li class="toctree-l4"><a class="reference internal" href="#block-device-options">Block device options</a></li>
<li class="toctree-l4"><a class="reference internal" href="#character-device-options">Character device options</a></li>
<li class="toctree-l4"><a class="reference internal" href="#cpu-device-properties">CPU device properties</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#backwards-compatibility">Backwards compatibility</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#runnability-guarantee-of-cpu-models-since-4-1">Runnability guarantee of CPU models (since 4.1)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#qemu-guest-agent">QEMU guest agent</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#blacklist-command-line-option-since-7-2"><code class="docutils literal notranslate"><span class="pre">--blacklist</span></code> command line option (since 7.2)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#blacklist-config-file-option-since-7-2"><code class="docutils literal notranslate"><span class="pre">blacklist</span></code> config file option (since 7.2)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#migration">Migration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#skipped-migrationstats-field-since-8-1"><code class="docutils literal notranslate"><span class="pre">skipped</span></code> MigrationStats field (since 8.1)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#inc-migrate-command-option-since-8-2"><code class="docutils literal notranslate"><span class="pre">inc</span></code> migrate command option (since 8.2)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#blk-migrate-command-option-since-8-2"><code class="docutils literal notranslate"><span class="pre">blk</span></code> migrate command option (since 8.2)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#block-migration-since-8-2">block migration (since 8.2)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#old-compression-method-since-8-2">old compression method (since 8.2)</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="removed-features.html">Removed features</a></li>
<li class="toctree-l2"><a class="reference internal" href="license.html">License</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../system/index.html">System Emulation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user/index.html">User Mode Emulation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/index.html">Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../interop/index.html">System Emulation Management and Interoperability</a></li>
<li class="toctree-l1"><a class="reference internal" href="../specs/index.html">System Emulation Guest Hardware Specifications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../devel/index.html">Developer Information</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #802400" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">QEMU</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">About QEMU</a></li>
      <li class="breadcrumb-item active">Deprecated features</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://gitlab.com/qemu-project/qemu/blob/master/docs/about/deprecated.rst" class="fa fa-gitlab"> Edit on GitLab</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="deprecated-features">
<span id="id1"></span><h1>Deprecated features<a class="headerlink" href="#deprecated-features" title="Permalink to this heading"></a></h1>
<p>In general features are intended to be supported indefinitely once
introduced into QEMU. In the event that a feature needs to be removed,
it will be listed in this section. The feature will remain functional for the
release in which it was deprecated and one further release. After these two
releases, the feature is liable to be removed. Deprecated features may also
generate warnings on the console when QEMU starts up, or if activated via a
monitor command, however, this is not a mandatory requirement.</p>
<p>Prior to the 2.10.0 release there was no official policy on how
long features would be deprecated prior to their removal, nor
any documented list of which features were deprecated. Thus
any features deprecated prior to 2.10.0 will be treated as if
they were first deprecated in the 2.10.0 release.</p>
<p>What follows is a list of all features currently marked as
deprecated.</p>
<section id="system-emulator-command-line-arguments">
<h2>System emulator command line arguments<a class="headerlink" href="#system-emulator-command-line-arguments" title="Permalink to this heading"></a></h2>
<section id="short-form-boolean-options-since-6-0">
<h3>Short-form boolean options (since 6.0)<a class="headerlink" href="#short-form-boolean-options-since-6-0" title="Permalink to this heading"></a></h3>
<p>Boolean options such as <code class="docutils literal notranslate"><span class="pre">share=on</span></code>/<code class="docutils literal notranslate"><span class="pre">share=off</span></code> could be written
in short form as <code class="docutils literal notranslate"><span class="pre">share</span></code> and <code class="docutils literal notranslate"><span class="pre">noshare</span></code>.  This is now deprecated
and will cause a warning.</p>
</section>
<section id="delay-option-for-socket-character-devices-since-6-0">
<h3><code class="docutils literal notranslate"><span class="pre">delay</span></code> option for socket character devices (since 6.0)<a class="headerlink" href="#delay-option-for-socket-character-devices-since-6-0" title="Permalink to this heading"></a></h3>
<p>The replacement for the <code class="docutils literal notranslate"><span class="pre">nodelay</span></code> short-form boolean option is <code class="docutils literal notranslate"><span class="pre">nodelay=on</span></code>
rather than <code class="docutils literal notranslate"><span class="pre">delay=off</span></code>.</p>
</section>
<section id="plugin-argument-passing-through-arg-string-since-6-1">
<h3>Plugin argument passing through <code class="docutils literal notranslate"><span class="pre">arg=&lt;string&gt;</span></code> (since 6.1)<a class="headerlink" href="#plugin-argument-passing-through-arg-string-since-6-1" title="Permalink to this heading"></a></h3>
<p>Passing TCG plugins arguments through <code class="docutils literal notranslate"><span class="pre">arg=</span></code> is redundant is makes the
command-line less readable, especially when the argument itself consist of a
name and a value, e.g. <code class="docutils literal notranslate"><span class="pre">-plugin</span> <span class="pre">plugin_name,arg=&quot;arg_name=arg_value&quot;</span></code>.
Therefore, the usage of <code class="docutils literal notranslate"><span class="pre">arg</span></code> is redundant. Single-word arguments are treated
as short-form boolean values, and passed to plugins as <code class="docutils literal notranslate"><span class="pre">arg_name=on</span></code>.
However, short-form booleans are deprecated and full explicit <code class="docutils literal notranslate"><span class="pre">arg_name=on</span></code>
form is preferred.</p>
</section>
<section id="smp-unsupported-parameter-1-smp-configurations-since-9-0">
<h3><code class="docutils literal notranslate"><span class="pre">-smp</span></code> (Unsupported “parameter=1” SMP configurations) (since 9.0)<a class="headerlink" href="#smp-unsupported-parameter-1-smp-configurations-since-9-0" title="Permalink to this heading"></a></h3>
<p>Specified CPU topology parameters must be supported by the machine.</p>
<p>In the SMP configuration, users should provide the CPU topology parameters that
are supported by the target machine.</p>
<p>However, historically it was allowed for users to specify the unsupported
topology parameter as “1”, which is meaningless. So support for this kind of
configurations (e.g. -smp drawers=1,books=1,clusters=1 for x86 PC machine) is
marked deprecated since 9.0, users have to ensure that all the topology members
described with -smp are supported by the target machine.</p>
</section>
</section>
<section id="user-mode-emulator-command-line-arguments">
<h2>User-mode emulator command line arguments<a class="headerlink" href="#user-mode-emulator-command-line-arguments" title="Permalink to this heading"></a></h2>
<section id="p-since-9-0">
<h3><code class="docutils literal notranslate"><span class="pre">-p</span></code> (since 9.0)<a class="headerlink" href="#p-since-9-0" title="Permalink to this heading"></a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">-p</span></code> option pretends to control the host page size.  However,
it is not possible to change the host page size, and using the
option only causes failures.</p>
</section>
</section>
<section id="qemu-machine-protocol-qmp-commands">
<h2>QEMU Machine Protocol (QMP) commands<a class="headerlink" href="#qemu-machine-protocol-qmp-commands" title="Permalink to this heading"></a></h2>
<section id="blockdev-open-tray-blockdev-close-tray-argument-device-since-2-8">
<h3><code class="docutils literal notranslate"><span class="pre">blockdev-open-tray</span></code>, <code class="docutils literal notranslate"><span class="pre">blockdev-close-tray</span></code> argument <code class="docutils literal notranslate"><span class="pre">device</span></code> (since 2.8)<a class="headerlink" href="#blockdev-open-tray-blockdev-close-tray-argument-device-since-2-8" title="Permalink to this heading"></a></h3>
<p>Use argument <code class="docutils literal notranslate"><span class="pre">id</span></code> instead.</p>
</section>
<section id="eject-argument-device-since-2-8">
<h3><code class="docutils literal notranslate"><span class="pre">eject</span></code> argument <code class="docutils literal notranslate"><span class="pre">device</span></code> (since 2.8)<a class="headerlink" href="#eject-argument-device-since-2-8" title="Permalink to this heading"></a></h3>
<p>Use argument <code class="docutils literal notranslate"><span class="pre">id</span></code> instead.</p>
</section>
<section id="blockdev-change-medium-argument-device-since-2-8">
<h3><code class="docutils literal notranslate"><span class="pre">blockdev-change-medium</span></code> argument <code class="docutils literal notranslate"><span class="pre">device</span></code> (since 2.8)<a class="headerlink" href="#blockdev-change-medium-argument-device-since-2-8" title="Permalink to this heading"></a></h3>
<p>Use argument <code class="docutils literal notranslate"><span class="pre">id</span></code> instead.</p>
</section>
<section id="block-set-io-throttle-argument-device-since-2-8">
<h3><code class="docutils literal notranslate"><span class="pre">block_set_io_throttle</span></code> argument <code class="docutils literal notranslate"><span class="pre">device</span></code> (since 2.8)<a class="headerlink" href="#block-set-io-throttle-argument-device-since-2-8" title="Permalink to this heading"></a></h3>
<p>Use argument <code class="docutils literal notranslate"><span class="pre">id</span></code> instead.</p>
</section>
<section id="blockdev-add-empty-string-argument-backing-since-2-10">
<h3><code class="docutils literal notranslate"><span class="pre">blockdev-add</span></code> empty string argument <code class="docutils literal notranslate"><span class="pre">backing</span></code> (since 2.10)<a class="headerlink" href="#blockdev-add-empty-string-argument-backing-since-2-10" title="Permalink to this heading"></a></h3>
<p>Use argument value <code class="docutils literal notranslate"><span class="pre">null</span></code> instead.</p>
</section>
<section id="block-commit-arguments-base-and-top-since-3-1">
<h3><code class="docutils literal notranslate"><span class="pre">block-commit</span></code> arguments <code class="docutils literal notranslate"><span class="pre">base</span></code> and <code class="docutils literal notranslate"><span class="pre">top</span></code> (since 3.1)<a class="headerlink" href="#block-commit-arguments-base-and-top-since-3-1" title="Permalink to this heading"></a></h3>
<p>Use arguments <code class="docutils literal notranslate"><span class="pre">base-node</span></code> and <code class="docutils literal notranslate"><span class="pre">top-node</span></code> instead.</p>
</section>
<section id="nbd-server-add-and-nbd-server-remove-since-5-2">
<h3><code class="docutils literal notranslate"><span class="pre">nbd-server-add</span></code> and <code class="docutils literal notranslate"><span class="pre">nbd-server-remove</span></code> (since 5.2)<a class="headerlink" href="#nbd-server-add-and-nbd-server-remove-since-5-2" title="Permalink to this heading"></a></h3>
<p>Use the more generic commands <code class="docutils literal notranslate"><span class="pre">block-export-add</span></code> and <code class="docutils literal notranslate"><span class="pre">block-export-del</span></code>
instead.  As part of this deprecation, where <code class="docutils literal notranslate"><span class="pre">nbd-server-add</span></code> used a
single <code class="docutils literal notranslate"><span class="pre">bitmap</span></code>, the new <code class="docutils literal notranslate"><span class="pre">block-export-add</span></code> uses a list of <code class="docutils literal notranslate"><span class="pre">bitmaps</span></code>.</p>
</section>
<section id="query-qmp-schema-return-value-member-values-since-6-2">
<h3><code class="docutils literal notranslate"><span class="pre">query-qmp-schema</span></code> return value member <code class="docutils literal notranslate"><span class="pre">values</span></code> (since 6.2)<a class="headerlink" href="#query-qmp-schema-return-value-member-values-since-6-2" title="Permalink to this heading"></a></h3>
<p>Member <code class="docutils literal notranslate"><span class="pre">values</span></code> in return value elements with meta-type <code class="docutils literal notranslate"><span class="pre">enum</span></code> is
deprecated.  Use <code class="docutils literal notranslate"><span class="pre">members</span></code> instead.</p>
</section>
<section id="drive-backup-since-6-2">
<h3><code class="docutils literal notranslate"><span class="pre">drive-backup</span></code> (since 6.2)<a class="headerlink" href="#drive-backup-since-6-2" title="Permalink to this heading"></a></h3>
<p>Use <code class="docutils literal notranslate"><span class="pre">blockdev-backup</span></code> in combination with <code class="docutils literal notranslate"><span class="pre">blockdev-add</span></code> instead.
This change primarily separates the creation/opening process of the backup
target with explicit, separate steps. <code class="docutils literal notranslate"><span class="pre">blockdev-backup</span></code> uses mostly the
same arguments as <code class="docutils literal notranslate"><span class="pre">drive-backup</span></code>, except the <code class="docutils literal notranslate"><span class="pre">format</span></code> and <code class="docutils literal notranslate"><span class="pre">mode</span></code>
options are removed in favor of using explicit <code class="docutils literal notranslate"><span class="pre">blockdev-create</span></code> and
<code class="docutils literal notranslate"><span class="pre">blockdev-add</span></code> calls. See <a class="reference internal" href="../interop/live-block-operations.html"><span class="doc">Live Block Device Operations</span></a> for
details.</p>
</section>
<section id="incorrectly-typed-device-add-arguments-since-6-2">
<h3>Incorrectly typed <code class="docutils literal notranslate"><span class="pre">device_add</span></code> arguments (since 6.2)<a class="headerlink" href="#incorrectly-typed-device-add-arguments-since-6-2" title="Permalink to this heading"></a></h3>
<p>Due to shortcomings in the internal implementation of <code class="docutils literal notranslate"><span class="pre">device_add</span></code>, QEMU
incorrectly accepts certain invalid arguments: Any object or list arguments are
silently ignored. Other argument types are not checked, but an implicit
conversion happens, so that e.g. string values can be assigned to integer
device properties or vice versa.</p>
<p>This is a bug in QEMU that will be fixed in the future so that previously
accepted incorrect commands will return an error. Users should make sure that
all arguments passed to <code class="docutils literal notranslate"><span class="pre">device_add</span></code> are consistent with the documented
property types.</p>
</section>
</section>
<section id="qemu-machine-protocol-qmp-events">
<h2>QEMU Machine Protocol (QMP) events<a class="headerlink" href="#qemu-machine-protocol-qmp-events" title="Permalink to this heading"></a></h2>
<section id="mem-unplug-error-since-6-2">
<h3><code class="docutils literal notranslate"><span class="pre">MEM_UNPLUG_ERROR</span></code> (since 6.2)<a class="headerlink" href="#mem-unplug-error-since-6-2" title="Permalink to this heading"></a></h3>
<p>Use the more generic event <code class="docutils literal notranslate"><span class="pre">DEVICE_UNPLUG_GUEST_ERROR</span></code> instead.</p>
</section>
<section id="vcpu-trace-events-since-8-1">
<h3><code class="docutils literal notranslate"><span class="pre">vcpu</span></code> trace events (since 8.1)<a class="headerlink" href="#vcpu-trace-events-since-8-1" title="Permalink to this heading"></a></h3>
<p>The ability to instrument QEMU helper functions with vCPU-aware trace
points was removed in 7.0. However QMP still exposed the vcpu
parameter. This argument has now been deprecated and the remaining
remaining trace points that used it are selected just by name.</p>
</section>
</section>
<section id="host-architectures">
<h2>Host Architectures<a class="headerlink" href="#host-architectures" title="Permalink to this heading"></a></h2>
<section id="be-mips-since-7-2">
<h3>BE MIPS (since 7.2)<a class="headerlink" href="#be-mips-since-7-2" title="Permalink to this heading"></a></h3>
<p>As Debian 10 (“Buster”) moved into LTS the big endian 32 bit version of
MIPS moved out of support making it hard to maintain our
cross-compilation CI tests of the architecture. As we no longer have
CI coverage support may bitrot away before the deprecation process
completes. The little endian variants of MIPS (both 32 and 64 bit) are
still a supported host architecture.</p>
</section>
<section id="system-emulation-on-32-bit-x86-hosts-since-8-0">
<h3>System emulation on 32-bit x86 hosts (since 8.0)<a class="headerlink" href="#system-emulation-on-32-bit-x86-hosts-since-8-0" title="Permalink to this heading"></a></h3>
<p>Support for 32-bit x86 host deployments is increasingly uncommon in mainstream
OS distributions given the widespread availability of 64-bit x86 hardware.
The QEMU project no longer considers 32-bit x86 support for system emulation to
be an effective use of its limited resources, and thus intends to discontinue
it. Since all recent x86 hardware from the past &gt;10 years is capable of the
64-bit x86 extensions, a corresponding 64-bit OS should be used instead.</p>
</section>
</section>
<section id="system-emulator-cpus">
<h2>System emulator CPUs<a class="headerlink" href="#system-emulator-cpus" title="Permalink to this heading"></a></h2>
<section id="nios-ii-cpu-since-8-2">
<h3>Nios II CPU (since 8.2)<a class="headerlink" href="#nios-ii-cpu-since-8-2" title="Permalink to this heading"></a></h3>
<p>The Nios II architecture is orphan. The <code class="docutils literal notranslate"><span class="pre">nios2</span></code> guest CPU support is
deprecated and will be removed in a future version of QEMU.</p>
</section>
<section id="power5-and-power7-cpu-names-since-9-0">
<h3><code class="docutils literal notranslate"><span class="pre">power5+</span></code> and <code class="docutils literal notranslate"><span class="pre">power7+</span></code> CPU names (since 9.0)<a class="headerlink" href="#power5-and-power7-cpu-names-since-9-0" title="Permalink to this heading"></a></h3>
<p>The character “+” in device (and thus also CPU) names is not allowed
in the QEMU object model anymore. <code class="docutils literal notranslate"><span class="pre">power5+</span></code>, <code class="docutils literal notranslate"><span class="pre">power5+_v2.1</span></code>,
<code class="docutils literal notranslate"><span class="pre">power7+</span></code> and <code class="docutils literal notranslate"><span class="pre">power7+_v2.1</span></code> are currently still supported via
an alias, but for consistency these will get removed in a future
release, too. Use <code class="docutils literal notranslate"><span class="pre">power5p_v2.1</span></code> and <code class="docutils literal notranslate"><span class="pre">power7p_v2.1</span></code> instead.</p>
</section>
<section id="cris-cpu-architecture-since-9-0">
<h3>CRIS CPU architecture (since 9.0)<a class="headerlink" href="#cris-cpu-architecture-since-9-0" title="Permalink to this heading"></a></h3>
<p>The CRIS architecture was pulled from Linux in 4.17 and the compiler
is no longer packaged in any distro making it harder to run the
<code class="docutils literal notranslate"><span class="pre">check-tcg</span></code> tests. Unless we can improve the testing situation there
is a chance the code will bitrot without anyone noticing.</p>
</section>
</section>
<section id="system-emulator-machines">
<h2>System emulator machines<a class="headerlink" href="#system-emulator-machines" title="Permalink to this heading"></a></h2>
<section id="arm-virt-machine-dtb-kaslr-seed-property-since-7-1">
<h3>Arm <code class="docutils literal notranslate"><span class="pre">virt</span></code> machine <code class="docutils literal notranslate"><span class="pre">dtb-kaslr-seed</span></code> property (since 7.1)<a class="headerlink" href="#arm-virt-machine-dtb-kaslr-seed-property-since-7-1" title="Permalink to this heading"></a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">dtb-kaslr-seed</span></code> property on the <code class="docutils literal notranslate"><span class="pre">virt</span></code> board has been
deprecated; use the new name <code class="docutils literal notranslate"><span class="pre">dtb-randomness</span></code> instead. The new name
better reflects the way this property affects all random data within
the device tree blob, not just the <code class="docutils literal notranslate"><span class="pre">kaslr-seed</span></code> node.</p>
</section>
<section id="pc-i440fx-2-0-up-to-pc-i440fx-2-3-since-8-2">
<h3><code class="docutils literal notranslate"><span class="pre">pc-i440fx-2.0</span></code> up to <code class="docutils literal notranslate"><span class="pre">pc-i440fx-2.3</span></code> (since 8.2)<a class="headerlink" href="#pc-i440fx-2-0-up-to-pc-i440fx-2-3-since-8-2" title="Permalink to this heading"></a></h3>
<p>These old machine types are quite neglected nowadays and thus might have
various pitfalls with regards to live migration. Use a newer machine type
instead.</p>
</section>
<section id="nios-ii-10m50-ghrd-and-nios2-generic-nommu-machines-since-8-2">
<h3>Nios II <code class="docutils literal notranslate"><span class="pre">10m50-ghrd</span></code> and <code class="docutils literal notranslate"><span class="pre">nios2-generic-nommu</span></code> machines (since 8.2)<a class="headerlink" href="#nios-ii-10m50-ghrd-and-nios2-generic-nommu-machines-since-8-2" title="Permalink to this heading"></a></h3>
<p>The Nios II architecture is orphan.</p>
</section>
<section id="shix-since-9-0">
<h3><code class="docutils literal notranslate"><span class="pre">shix</span></code> (since 9.0)<a class="headerlink" href="#shix-since-9-0" title="Permalink to this heading"></a></h3>
<p>The machine is no longer in existence and has been long unmaintained
in QEMU. This also holds for the TC51828 16MiB flash that it uses.</p>
</section>
<section id="pseries-2-1-up-to-pseries-2-12-since-9-0">
<h3><code class="docutils literal notranslate"><span class="pre">pseries-2.1</span></code> up to <code class="docutils literal notranslate"><span class="pre">pseries-2.12</span></code> (since 9.0)<a class="headerlink" href="#pseries-2-1-up-to-pseries-2-12-since-9-0" title="Permalink to this heading"></a></h3>
<p>Older pseries machines before version 3.0 have undergone many changes
to correct issues, mostly regarding migration compatibility. These are
no longer maintained and removing them will make the code easier to
read and maintain. Use versions 3.0 and above as a replacement.</p>
</section>
<section id="arm-machines-akita-borzoi-cheetah-connex-mainstone-n800-n810-spitz-terrier-tosa-verdex-z2-since-9-0">
<h3>Arm machines <code class="docutils literal notranslate"><span class="pre">akita</span></code>, <code class="docutils literal notranslate"><span class="pre">borzoi</span></code>, <code class="docutils literal notranslate"><span class="pre">cheetah</span></code>, <code class="docutils literal notranslate"><span class="pre">connex</span></code>, <code class="docutils literal notranslate"><span class="pre">mainstone</span></code>, <code class="docutils literal notranslate"><span class="pre">n800</span></code>, <code class="docutils literal notranslate"><span class="pre">n810</span></code>, <code class="docutils literal notranslate"><span class="pre">spitz</span></code>, <code class="docutils literal notranslate"><span class="pre">terrier</span></code>, <code class="docutils literal notranslate"><span class="pre">tosa</span></code>, <code class="docutils literal notranslate"><span class="pre">verdex</span></code>, <code class="docutils literal notranslate"><span class="pre">z2</span></code> (since 9.0)<a class="headerlink" href="#arm-machines-akita-borzoi-cheetah-connex-mainstone-n800-n810-spitz-terrier-tosa-verdex-z2-since-9-0" title="Permalink to this heading"></a></h3>
<p>QEMU includes models of some machine types where the QEMU code that
emulates their SoCs is very old and unmaintained. This code is now
blocking our ability to move forward with various changes across
the codebase, and over many years nobody has been interested in
trying to modernise it. We don’t expect any of these machines to have
a large number of users, because they’re all modelling hardware that
has now passed away into history. We are therefore dropping support
for all machine types using the PXA2xx and OMAP2 SoCs. We are also
dropping the <code class="docutils literal notranslate"><span class="pre">cheetah</span></code> OMAP1 board, because we don’t have any
test images for it and don’t know of anybody who does; the <code class="docutils literal notranslate"><span class="pre">sx1</span></code>
and <code class="docutils literal notranslate"><span class="pre">sx1-v1</span></code> OMAP1 machines remain supported for now.</p>
</section>
</section>
<section id="backend-options">
<h2>Backend options<a class="headerlink" href="#backend-options" title="Permalink to this heading"></a></h2>
<section id="using-non-persistent-backing-file-with-pmem-on-since-6-1">
<h3>Using non-persistent backing file with pmem=on (since 6.1)<a class="headerlink" href="#using-non-persistent-backing-file-with-pmem-on-since-6-1" title="Permalink to this heading"></a></h3>
<p>This option is used when <code class="docutils literal notranslate"><span class="pre">memory-backend-file</span></code> is consumed by emulated NVDIMM
device. However enabling <code class="docutils literal notranslate"><span class="pre">memory-backend-file.pmem</span></code> option, when backing file
is (a) not DAX capable or (b) not on a filesystem that support direct mapping
of persistent memory, is not safe and may lead to data loss or corruption in case
of host crash.
Options are:</p>
<blockquote>
<div><ul class="simple">
<li><p>modify VM configuration to set <code class="docutils literal notranslate"><span class="pre">pmem=off</span></code> to continue using fake NVDIMM
(without persistence guaranties) with backing file on non DAX storage</p></li>
<li><p>move backing file to NVDIMM storage and keep <code class="docutils literal notranslate"><span class="pre">pmem=on</span></code>
(to have NVDIMM with persistence guaranties).</p></li>
</ul>
</div></blockquote>
</section>
</section>
<section id="device-options">
<h2>Device options<a class="headerlink" href="#device-options" title="Permalink to this heading"></a></h2>
<section id="emulated-device-options">
<h3>Emulated device options<a class="headerlink" href="#emulated-device-options" title="Permalink to this heading"></a></h3>
<section id="device-virtio-blk-scsi-on-off-since-5-0">
<h4><code class="docutils literal notranslate"><span class="pre">-device</span> <span class="pre">virtio-blk,scsi=on|off</span></code> (since 5.0)<a class="headerlink" href="#device-virtio-blk-scsi-on-off-since-5-0" title="Permalink to this heading"></a></h4>
<p>The virtio-blk SCSI passthrough feature is a legacy VIRTIO feature.  VIRTIO 1.0
and later do not support it because the virtio-scsi device was introduced for
full SCSI support.  Use virtio-scsi instead when SCSI passthrough is required.</p>
<p>Note this also applies to <code class="docutils literal notranslate"><span class="pre">-device</span> <span class="pre">virtio-blk-pci,scsi=on|off</span></code>, which is an
alias.</p>
</section>
<section id="device-nvme-ns-eui64-default-on-off-since-7-1">
<h4><code class="docutils literal notranslate"><span class="pre">-device</span> <span class="pre">nvme-ns,eui64-default=on|off</span></code> (since 7.1)<a class="headerlink" href="#device-nvme-ns-eui64-default-on-off-since-7-1" title="Permalink to this heading"></a></h4>
<p>In QEMU versions 6.1, 6.2 and 7.0, the <code class="docutils literal notranslate"><span class="pre">nvme-ns</span></code> generates an EUI-64
identifier that is not globally unique. If an EUI-64 identifier is required, the
user must set it explicitly using the <code class="docutils literal notranslate"><span class="pre">nvme-ns</span></code> device parameter <code class="docutils literal notranslate"><span class="pre">eui64</span></code>.</p>
</section>
<section id="device-nvme-use-intel-id-on-off-since-7-1">
<h4><code class="docutils literal notranslate"><span class="pre">-device</span> <span class="pre">nvme,use-intel-id=on|off</span></code> (since 7.1)<a class="headerlink" href="#device-nvme-use-intel-id-on-off-since-7-1" title="Permalink to this heading"></a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">nvme</span></code> device originally used a PCI Vendor/Device Identifier combination
from Intel that was not properly allocated. Since version 5.2, the controller
has used a properly allocated identifier. Deprecate the <code class="docutils literal notranslate"><span class="pre">use-intel-id</span></code>
machine compatibility parameter.</p>
</section>
<section id="device-cxl-type3-memdev-xxxx-since-8-0">
<h4><code class="docutils literal notranslate"><span class="pre">-device</span> <span class="pre">cxl-type3,memdev=xxxx</span></code> (since 8.0)<a class="headerlink" href="#device-cxl-type3-memdev-xxxx-since-8-0" title="Permalink to this heading"></a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">cxl-type3</span></code> device initially only used a single memory backend.  With
the addition of volatile memory support, it is now necessary to distinguish
between persistent and volatile memory backends.  As such, memdev is deprecated
in favor of persistent-memdev.</p>
</section>
<section id="fsdev-proxy-and-virtfs-proxy-since-8-1">
<h4><code class="docutils literal notranslate"><span class="pre">-fsdev</span> <span class="pre">proxy</span></code> and <code class="docutils literal notranslate"><span class="pre">-virtfs</span> <span class="pre">proxy</span></code> (since 8.1)<a class="headerlink" href="#fsdev-proxy-and-virtfs-proxy-since-8-1" title="Permalink to this heading"></a></h4>
<p>The 9p <code class="docutils literal notranslate"><span class="pre">proxy</span></code> filesystem backend driver has been deprecated and will be
removed (along with its proxy helper daemon) in a future version of QEMU. Please
use <code class="docutils literal notranslate"><span class="pre">-fsdev</span> <span class="pre">local</span></code> or <code class="docutils literal notranslate"><span class="pre">-virtfs</span> <span class="pre">local</span></code> for using the 9p <code class="docutils literal notranslate"><span class="pre">local</span></code> filesystem
backend, or alternatively consider deploying virtiofsd instead.</p>
<p>The 9p <code class="docutils literal notranslate"><span class="pre">proxy</span></code> backend was originally developed as an alternative to the 9p
<code class="docutils literal notranslate"><span class="pre">local</span></code> backend. The idea was to enhance security by dispatching actual low
level filesystem operations from 9p server (QEMU process) over to a separate
process (the virtfs-proxy-helper binary). However this alternative never gained
momentum. The proxy backend is much slower than the local backend, hasn’t seen
any development in years, and showed to be less secure, especially due to the
fact that its helper daemon must be run as root, whereas with the local backend
QEMU is typically run as unprivileged user and allows to tighten behaviour by
mapping permissions et al by using its ‘mapped’ security model option.</p>
<p>Nowadays it would make sense to reimplement the <code class="docutils literal notranslate"><span class="pre">proxy</span></code> backend by using
QEMU’s <code class="docutils literal notranslate"><span class="pre">vhost</span></code> feature, which would eliminate the high latency costs under
which the 9p <code class="docutils literal notranslate"><span class="pre">proxy</span></code> backend currently suffers. However as of to date nobody
has indicated plans for such kind of reimplementation unfortunately.</p>
</section>
<section id="risc-v-any-cpu-type-cpu-any-since-8-2">
<h4>RISC-V ‘any’ CPU type <code class="docutils literal notranslate"><span class="pre">-cpu</span> <span class="pre">any</span></code> (since 8.2)<a class="headerlink" href="#risc-v-any-cpu-type-cpu-any-since-8-2" title="Permalink to this heading"></a></h4>
<p>The ‘any’ CPU type was introduced back in 2018 and has been around since the
initial RISC-V QEMU port. Its usage has always been unclear: users don’t know
what to expect from a CPU called ‘any’, and in fact the CPU does not do anything
special that isn’t already done by the default CPUs rv32/rv64.</p>
<p>After the introduction of the ‘max’ CPU type, RISC-V now has a good coverage
of generic CPUs: rv32 and rv64 as default CPUs and ‘max’ as a feature complete
CPU for both 32 and 64 bit builds. Users are then discouraged to use the ‘any’
CPU type starting in 8.2.</p>
</section>
<section id="risc-v-cpu-properties-which-start-with-capital-z-since-8-2">
<h4>RISC-V CPU properties which start with capital ‘Z’ (since 8.2)<a class="headerlink" href="#risc-v-cpu-properties-which-start-with-capital-z-since-8-2" title="Permalink to this heading"></a></h4>
<p>All RISC-V CPU properties which start with capital ‘Z’ are being deprecated
starting in 8.2. The reason is that they were wrongly added with capital ‘Z’
in the past. CPU properties were later added with lower-case names, which
is the format we want to use from now on.</p>
<p>Users which try to use these deprecated properties will receive a warning
recommending to switch to their stable counterparts:</p>
<ul class="simple">
<li><p>“Zifencei” should be replaced with “zifencei”</p></li>
<li><p>“Zicsr” should be replaced with “zicsr”</p></li>
<li><p>“Zihintntl” should be replaced with “zihintntl”</p></li>
<li><p>“Zihintpause” should be replaced with “zihintpause”</p></li>
<li><p>“Zawrs” should be replaced with “zawrs”</p></li>
<li><p>“Zfa” should be replaced with “zfa”</p></li>
<li><p>“Zfh” should be replaced with “zfh”</p></li>
<li><p>“Zfhmin” should be replaced with “zfhmin”</p></li>
<li><p>“Zve32f” should be replaced with “zve32f”</p></li>
<li><p>“Zve64f” should be replaced with “zve64f”</p></li>
<li><p>“Zve64d” should be replaced with “zve64d”</p></li>
</ul>
</section>
<section id="device-pvrdma-and-the-rdma-subsystem-since-8-2">
<h4><code class="docutils literal notranslate"><span class="pre">-device</span> <span class="pre">pvrdma</span></code> and the rdma subsystem (since 8.2)<a class="headerlink" href="#device-pvrdma-and-the-rdma-subsystem-since-8-2" title="Permalink to this heading"></a></h4>
<p>The pvrdma device and the whole rdma subsystem are in a bad shape and
without active maintenance. The QEMU project intends to remove this
device and subsystem from the code base in a future release without
replacement unless somebody steps up and improves the situation.</p>
</section>
</section>
<section id="block-device-options">
<h3>Block device options<a class="headerlink" href="#block-device-options" title="Permalink to this heading"></a></h3>
<section id="backing-since-2-12">
<h4><code class="docutils literal notranslate"><span class="pre">&quot;backing&quot;:</span> <span class="pre">&quot;&quot;</span></code> (since 2.12)<a class="headerlink" href="#backing-since-2-12" title="Permalink to this heading"></a></h4>
<p>In order to prevent QEMU from automatically opening an image’s backing
chain, use <code class="docutils literal notranslate"><span class="pre">&quot;backing&quot;:</span> <span class="pre">null</span></code> instead.</p>
</section>
<section id="rbd-keyvalue-pair-encoded-filenames-since-3-1">
<h4><code class="docutils literal notranslate"><span class="pre">rbd</span></code> keyvalue pair encoded filenames: <code class="docutils literal notranslate"><span class="pre">&quot;&quot;</span></code> (since 3.1)<a class="headerlink" href="#rbd-keyvalue-pair-encoded-filenames-since-3-1" title="Permalink to this heading"></a></h4>
<p>Options for <code class="docutils literal notranslate"><span class="pre">rbd</span></code> should be specified according to its runtime options,
like other block drivers.  Legacy parsing of keyvalue pair encoded
filenames is useful to open images with the old format for backing files;
These image files should be updated to use the current format.</p>
<p>Example of legacy encoding:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">json</span><span class="p">:{</span><span class="s2">&quot;file.driver&quot;</span><span class="p">:</span><span class="s2">&quot;rbd&quot;</span><span class="p">,</span> <span class="s2">&quot;file.filename&quot;</span><span class="p">:</span><span class="s2">&quot;rbd:rbd/name&quot;</span><span class="p">}</span>
</pre></div>
</div>
<p>The above, converted to the current supported format:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">json</span><span class="p">:{</span><span class="s2">&quot;file.driver&quot;</span><span class="p">:</span><span class="s2">&quot;rbd&quot;</span><span class="p">,</span> <span class="s2">&quot;file.pool&quot;</span><span class="p">:</span><span class="s2">&quot;rbd&quot;</span><span class="p">,</span> <span class="s2">&quot;file.image&quot;</span><span class="p">:</span><span class="s2">&quot;name&quot;</span><span class="p">}</span>
</pre></div>
</div>
</section>
<section id="iscsi-password-xxx-since-8-0">
<h4><code class="docutils literal notranslate"><span class="pre">iscsi,password=xxx</span></code> (since 8.0)<a class="headerlink" href="#iscsi-password-xxx-since-8-0" title="Permalink to this heading"></a></h4>
<p>Specifying the iSCSI password in plain text on the command line using the
<code class="docutils literal notranslate"><span class="pre">password</span></code> option is insecure. The <code class="docutils literal notranslate"><span class="pre">password-secret</span></code> option should be
used instead, to refer to a <code class="docutils literal notranslate"><span class="pre">--object</span> <span class="pre">secret...</span></code> instance that provides
a password via a file, or encrypted.</p>
</section>
</section>
<section id="character-device-options">
<h3>Character device options<a class="headerlink" href="#character-device-options" title="Permalink to this heading"></a></h3>
<section id="backend-memory-since-9-0">
<h4>Backend <code class="docutils literal notranslate"><span class="pre">memory</span></code> (since 9.0)<a class="headerlink" href="#backend-memory-since-9-0" title="Permalink to this heading"></a></h4>
<p><code class="docutils literal notranslate"><span class="pre">memory</span></code> is a deprecated synonym for <code class="docutils literal notranslate"><span class="pre">ringbuf</span></code>.</p>
</section>
</section>
<section id="cpu-device-properties">
<h3>CPU device properties<a class="headerlink" href="#cpu-device-properties" title="Permalink to this heading"></a></h3>
<section id="pmu-num-n-on-risc-v-cpus-since-8-2">
<h4><code class="docutils literal notranslate"><span class="pre">pmu-num=n</span></code> on RISC-V CPUs (since 8.2)<a class="headerlink" href="#pmu-num-n-on-risc-v-cpus-since-8-2" title="Permalink to this heading"></a></h4>
<p>In order to support more flexible counter configurations this has been replaced
by a <code class="docutils literal notranslate"><span class="pre">pmu-mask</span></code> property. If set of counters is continuous then the mask can
be calculated with <code class="docutils literal notranslate"><span class="pre">((2</span> <span class="pre">^</span> <span class="pre">n)</span> <span class="pre">-</span> <span class="pre">1)</span> <span class="pre">&lt;&lt;</span> <span class="pre">3</span></code>. The least significant three bits
must be left clear.</p>
</section>
</section>
</section>
<section id="backwards-compatibility">
<h2>Backwards compatibility<a class="headerlink" href="#backwards-compatibility" title="Permalink to this heading"></a></h2>
<section id="runnability-guarantee-of-cpu-models-since-4-1">
<h3>Runnability guarantee of CPU models (since 4.1)<a class="headerlink" href="#runnability-guarantee-of-cpu-models-since-4-1" title="Permalink to this heading"></a></h3>
<p>Previous versions of QEMU never changed existing CPU models in
ways that introduced additional host software or hardware
requirements to the VM.  This allowed management software to
safely change the machine type of an existing VM without
introducing new requirements (“runnability guarantee”).  This
prevented CPU models from being updated to include CPU
vulnerability mitigations, leaving guests vulnerable in the
default configuration.</p>
<p>The CPU model runnability guarantee won’t apply anymore to
existing CPU models.  Management software that needs runnability
guarantees must resolve the CPU model aliases using the
<code class="docutils literal notranslate"><span class="pre">alias-of</span></code> field returned by the <code class="docutils literal notranslate"><span class="pre">query-cpu-definitions</span></code> QMP
command.</p>
<p>While those guarantees are kept, the return value of
<code class="docutils literal notranslate"><span class="pre">query-cpu-definitions</span></code> will have existing CPU model aliases
point to a version that doesn’t break runnability guarantees
(specifically, version 1 of those CPU models).  In future QEMU
versions, aliases will point to newer CPU model versions
depending on the machine type, so management software must
resolve CPU model aliases before starting a virtual machine.</p>
</section>
</section>
<section id="qemu-guest-agent">
<h2>QEMU guest agent<a class="headerlink" href="#qemu-guest-agent" title="Permalink to this heading"></a></h2>
<section id="blacklist-command-line-option-since-7-2">
<h3><code class="docutils literal notranslate"><span class="pre">--blacklist</span></code> command line option (since 7.2)<a class="headerlink" href="#blacklist-command-line-option-since-7-2" title="Permalink to this heading"></a></h3>
<p><code class="docutils literal notranslate"><span class="pre">--blacklist</span></code> has been replaced by <code class="docutils literal notranslate"><span class="pre">--block-rpcs</span></code> (which is a better
wording for what this option does). The short form <code class="docutils literal notranslate"><span class="pre">-b</span></code> still stays
the same and thus is the preferred way for scripts that should run with
both, older and future versions of QEMU.</p>
</section>
<section id="blacklist-config-file-option-since-7-2">
<h3><code class="docutils literal notranslate"><span class="pre">blacklist</span></code> config file option (since 7.2)<a class="headerlink" href="#blacklist-config-file-option-since-7-2" title="Permalink to this heading"></a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">blacklist</span></code> config file option has been renamed to <code class="docutils literal notranslate"><span class="pre">block-rpcs</span></code>
(to be in sync with the renaming of the corresponding command line
option).</p>
</section>
</section>
<section id="migration">
<h2>Migration<a class="headerlink" href="#migration" title="Permalink to this heading"></a></h2>
<section id="skipped-migrationstats-field-since-8-1">
<h3><code class="docutils literal notranslate"><span class="pre">skipped</span></code> MigrationStats field (since 8.1)<a class="headerlink" href="#skipped-migrationstats-field-since-8-1" title="Permalink to this heading"></a></h3>
<p><code class="docutils literal notranslate"><span class="pre">skipped</span></code> field in Migration stats has been deprecated.  It hasn’t
been used for more than 10 years.</p>
</section>
<section id="inc-migrate-command-option-since-8-2">
<h3><code class="docutils literal notranslate"><span class="pre">inc</span></code> migrate command option (since 8.2)<a class="headerlink" href="#inc-migrate-command-option-since-8-2" title="Permalink to this heading"></a></h3>
<p>Use blockdev-mirror with NBD instead.</p>
<p>As an intermediate step the <code class="docutils literal notranslate"><span class="pre">inc</span></code> functionality can be achieved by
setting the <code class="docutils literal notranslate"><span class="pre">block-incremental</span></code> migration parameter to <code class="docutils literal notranslate"><span class="pre">true</span></code>.
But this parameter is also deprecated.</p>
</section>
<section id="blk-migrate-command-option-since-8-2">
<h3><code class="docutils literal notranslate"><span class="pre">blk</span></code> migrate command option (since 8.2)<a class="headerlink" href="#blk-migrate-command-option-since-8-2" title="Permalink to this heading"></a></h3>
<p>Use blockdev-mirror with NBD instead.</p>
<p>As an intermediate step the <code class="docutils literal notranslate"><span class="pre">blk</span></code> functionality can be achieved by
setting the <code class="docutils literal notranslate"><span class="pre">block</span></code> migration capability to <code class="docutils literal notranslate"><span class="pre">true</span></code>.  But this
capability is also deprecated.</p>
</section>
<section id="block-migration-since-8-2">
<h3>block migration (since 8.2)<a class="headerlink" href="#block-migration-since-8-2" title="Permalink to this heading"></a></h3>
<p>Block migration is too inflexible.  It needs to migrate all block
devices or none.</p>
<p>Please see “QMP invocation for live storage migration with
<code class="docutils literal notranslate"><span class="pre">blockdev-mirror</span></code> + NBD” in docs/interop/live-block-operations.rst
for a detailed explanation.</p>
</section>
<section id="old-compression-method-since-8-2">
<h3>old compression method (since 8.2)<a class="headerlink" href="#old-compression-method-since-8-2" title="Permalink to this heading"></a></h3>
<p>Compression method fails too much.  Too many races.  We are going to
remove it if nobody fixes it.  For starters, migration-test
compression tests are disabled because they fail randomly.  If you need
compression, use multifd compression methods.</p>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="emulation.html" class="btn btn-neutral float-left" title="Emulation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="removed-features.html" class="btn btn-neutral float-right" title="Removed features" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, The QEMU Project Developers.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
  

<!-- Empty para to force a blank line after "Built with Sphinx ..." -->
<p></p>

<p>This documentation is for QEMU version 9.0.0.</p>


<p><a href="license.html">QEMU and this manual are released under the
GNU General Public License, version 2.</a></p>

 


</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>